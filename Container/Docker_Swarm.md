### Docker Swarm 
#### 서버 오케스트레이션(server orchestration): 여러 대의 서버와 여러 개의 서비스를 편리하게 관리해주는 작업
![server orchestration tool](https://user-images.githubusercontent.com/30011635/87406241-6af31480-c5fb-11ea-9281-ae9351607890.png)
- 스케줄링: 컨테이너를 적당한 서버에 배포해주는 작업이다. 여러 대의 서버 중 가장 할 일 없는 서버에 배포하거나 그냥 차례대로 배포 또는 아예 랜덤하게 배포할 수도 있다. 컨테이너 개수를 여러 개로 늘리면 적당히 나눠서 배포 하고, 서버가 죽으면 실행 중이던 컨테이너를 다른 서버에 띄워주기도 한다.
- 클러스터링: 여러 개의 서버를 하나의 서버처럼 사용하는 것이다. 여기저기 흩어져 있는 컨테이너도 가상 네트워크를 이용하여 마치 같은 서버에 있는 것 처럼 사용할 수 있다.
- 서비스 디스커버리: 서비스를 찾아주는 기능. ⭐️클러스터 환경에서 컨테이너는 어느 서버에 생성될 지 알 수 없다.⭐️ 따라서 컨테이너와 통신하기 위해서 어느 서버에서 실행중인지 알아야 하고, 컨테이너가 생성되고 중지될 때 어딘가에 IP와 Port같은 정보를 업데이트 해줘야 한다. key-value 스토리지에 정보를 저장할 수도 있고, 내부 DNS서버를 이용할 수도 있다.
- 로깅, 모니터링: 여러 대의 서버를 관리하는 경우 로그와 서버 상태를 한 곳에서 관리하는게 편하다. 툴 or 프로그램 사용. ELK, prometheus등 다양한 툴 활용 가능 <br>

--> 서버 오케스트레이션의 단점: 비용 어마어마, 설치와 관리가 어렵다, 대형 회사에서 보통 사용하는 편, 에러가 생기면 서버 전체에 영향을 줄 수 있어 조심스러움
--> 이런 서버 오케스트레이션의 단점을 도커 스웜이 바꿔 놓음. -> 구축 비용이 거의 들지 않고 관리가 쉬우며 다양한 기능 제공.

ref. [Docker Swarm을 이용한 쉽고 빠른 분산 서버 관리](https://subicura.com/2017/02/25/container-orchestration-with-docker-swarm.html)

- "도커 스웜" 이란 무엇인가!
  - 스웜은 원래 도커랑 별개로 개발 됐지만, 도커 1.12버전부터 "스웜 모드" 라는 이름으로 합쳐졌다. <b>도커에 모든게 내장 되어 다른 툴을 설치할 필요x</b> 도커 명령어와 compose를 그대로 사용할 수 있다.
  - 컨테이너 오케스트레이션 도구 중 하나다. 여러 대의 도커 호스트들을 마치 하나인 것 처럼 만들어주는 오케스트레이션 도구다. 
- 스웜
  - 스웜을 만들다. 스웜에 가입하다. = 클러스터를 만들다. 클러스터에 가입하다.
- 노드
  - 스웜 클러스터에 속한 <b>도커 서버의 단위</b> 한 서버에 하나의 도커데몬만 실행함. 그러니까 서버 == 노드
- 매니저 노드
  - 스웜 클러스터 상태를 관리함. <b>스웜 명령어는 매니저 노드에서만 실행 됨.</b> 매니저 노드는 곧 워커 노드가 되기도 함.
- 워커 노드
  - 매니저 노드의 명령을 받아 컨테이너를 생성하고 상태를 체크하는 노드
- 서비스
  - 배포 단위. 하나의 서비스는 하나의 이미지를 기반으로 생성. 
- 테스크
  - 컨테이너 배포 단위. 하나의 서비스는 여러개의 테스크를 실행할 수 있음. 

### Docker compose
- 도커 애플리케이션 개발 할 때 docker compose.yml 파일로 

### Docker
- 도커 파일 = 서버 운영 기록 코드화
- 도커 이미지 = 도커 파일 + 실행 시점
- environment disparities: 개발을 다 했고, 그걸 서버에 올려야 되는 상황에, 너의 개발 환경은 윈도우였고 서버가 리눅스라면..? 이게 바로 environment disparity다. 도커는 이것을 해결해줌!

### 쿠버네티스
- 도커를 관리하는 툴이다.
- 컨테이너가 굉장히 많고, 그걸 한 번에 배포해야 될 때! 수동으로 하기에는 좀 그렇다. 
- 컨테이너들을 모니터링 한다. 컨테이너가 죽었으면 쿠버네티스가 재빠르게 컨테이너를 재가동 시켜준다. 즉~ 컨테이너가 많을 수록 쿠버테니스를 쓰는게 유용하지!
- 로드 밸런싱
- 롤링 업데이트 (서비스 중단 없이 업데이트 가능)

Ref. [왜 굳이 도커(컨테이너)를 써야 하나요?](https://www.44bits.io/ko/post/why-should-i-use-docker-container)

### 이미지와 컨테이너 차이
- 도커 컨테이너를 구성하기 위해서 도커 이미지가 필요하다
Ref. [도커 컨테이너와 이미지란?](https://hoon93.tistory.com/48)
